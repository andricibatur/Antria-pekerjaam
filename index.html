<!-- Ganti bagian setInterval dan renderTasks menjadi seperti ini -->
<script>
  // renderTasks() hanya dipanggil sekali
  renderTasks();

  function updateAlerts() {
    const nowStr = new Date().toTimeString().slice(0, 5);
    document.querySelectorAll('.task').forEach(el => {
      const id = +el.dataset.id;
      const task = tasks.find(t => t.id === id);
      el.classList.remove('alert');
      if (task && (task.startTime === nowStr || task.endTime === nowStr)) {
        el.classList.add('alert');
      }
    });

    // update waktu selesai jika dicentang sekarang
    tasks.forEach(task => {
      if (task.done && !task.doneAt) {
        task.doneAt = new Date().toLocaleTimeString();
        renderDoneTable();
      }
    });
  }

  function renderTasks() {
    taskList.innerHTML = '';
    tasks.forEach(task => {
      const div = document.createElement('div');
      div.className = 'task';
      div.dataset.id = task.id;
      if (task.done) div.classList.add('done');
      if (task.shifted) div.classList.add('shifted');

      div.innerHTML = `
        <div class="left">
          <input type="text" value="${task.name}" oninput="updateTask(${task.id}, 'name', this.value)">
        </div>
        <div class="right">
          <input type="time" value="${task.startTime}" oninput="updateTask(${task.id}, 'startTime', this.value)">
          <input type="time" value="${task.endTime}" oninput="updateTask(${task.id}, 'endTime', this.value)">
          <label><input type="checkbox" ${task.done ? 'checked' : ''} onchange="toggleDone(${task.id})"> Selesai</label>
          <button class="shift-btn" onclick="shiftTask(${task.id})">Geser Kiri</button>
        </div>`;
      taskList.appendChild(div);
    });
    renderDoneTable();
  }

  function renderDoneTable() {
    doneTable.innerHTML = '';
    tasks.filter(t => t.done).forEach(task => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${task.name}</td><td>${task.startTime}</td><td>${task.endTime}</td><td>${task.doneAt || '-'}</td>`;
      doneTable.appendChild(tr);
    });
  }

  setInterval(updateAlerts, 1000); // hanya update alert tiap detik
</script>
